// Edge case tests (should compile and run)
// Covers: empty arrays, nested scopes, mixed numeric promotions, compound assignments, increment/decrement,
// while loops with zero iterations, if without else, function returning array, function with array params

print("-- edge: empty int array literal used immediately --");
int[] empty = [];
// append then pop to ensure methods on previously empty array
empty.append(1);
print(empty.pop());

print("-- edge: nested scopes deep variable access --");
int base = 5;
{
    int a = base + 1;
    {
        int b = a + 1;
        {
            int c = b + 1; // chain
            print(c); // expect 8
        }
    }
}

print("-- edge: numeric widening promotions --");
int i = 2;
float f = 3.0f;
double dd = 4.0;
// valid combinations (parser/type checker currently promotes inside binary handling)
print(i + f); // expect float
print(f + dd); // expect double
print(i + dd); // expect double

print("-- edge: compound assignments and inc/dec --");
int cx = 10;
// simple compound (ensuring parser accepts it)
cx += 5;
cx -= 3;
cx *= 2;
cx /= 3;
cx %= 4;
print(cx); // final value just for exercise

int counter = 0;
counter++;
counter++;
counter--;
print(counter);

print("-- edge: while loop zero iterations --");
int limit = 0;
while (limit < 0) { // should not execute
    print("UNREACHABLE");
}
print("loop skipped");

print("-- edge: function returning array and array param --");
int[] build(int n) {
    int[] arr = [n, n+1];
    return arr;
}

int sum2(int[] vals) {
    int a0 = vals[0];
    int a1 = vals[1];
    return a0 + a1;
}

int[] made = build(10);
print(sum2(made)); // expect 21

print("-- edge: method argument type mismatch is not here (all valid) --");
int[] seq = [1,2,3];
seq.insert(0, 99);
print(seq[0]); // 99

print("-- edge: array access expression in arithmetic --");
int x = seq[0] + 1; // tests ARRAY_ACCESS inside expression
print(x);

print("-- edge: equality and relational chaining separately --");
print( (1 + 2) == 3 );
print( (1 + 2) > 2 );
print( (1 + 2) < 5 );

print("-- edge: clear then reuse array --");
seq.clear();
seq.append(42);
print(seq[0]);

print("-- edge: empty array literal passed as arg (should have undetermined type so skip) --");
// Currently empty literal type inference returns None; avoid direct invalid usage; just ensure it's declared with explicit type above.

print("-- edge cases complete --");
